[%
  TemplateFactory.setOutputRoot(targetDir);

  
  for (cls in Class.allInstances()) {
    var t : Template = TemplateFactory.load("JavaClass.egl");
--    ("**" + cls.name).println();
    t.populate("cls",cls);
    t.generate(cls.filename());    
  }
    
  operation Class filename() : String {
    return self.name + ".java";
  }

 %]